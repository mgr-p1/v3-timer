<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>タイマー</title>
    <style>
      * {
        text-align: center;
        user-select: none;
      }
      body {
        margin: 0;
      }
      p {
        margin-top: 0;
        font-size: 50px;
      }
      ul {
        list-style: none;
        padding-left: 1%;
        font-size: 40px;
      }
      li {
        width: 200px;
      }
      .label {
        float: left;
        width: 30px;
      }
      .time {
        margin-left: 50px;
        width: 100px;
      }
    </style>
    <script type="text/javascript">
      (()=>{
        let counter = 0;
        let first = 0, second = 0, third = 0;

        const timer = setInterval(()=>{
          switch (counter) {
            case 3:
              third += 0.1;
            case 2:
              second += 0.1;
            case 1:
              first += 0.1;
            case 0:
              break;
          }
          document.querySelector('.time.first').innerHTML = first.toFixed(1);
          document.querySelector('.time.second').innerHTML = second.toFixed(1);
          document.querySelector('.time.third').innerHTML = third.toFixed(1);
          if (second <= 30 && counter >= 2) {
            document.querySelector('.v-three').innerHTML = (30 - second).toFixed(1);
            document.body.style.backgroundColor = 'red';
          } else {
            document.querySelector('.v-three').innerHTML = (0).toFixed(1);
            document.body.style.backgroundColor = 'white';
          }
        }, 100);

        const cng = () => {
          counter = counter>=3 ? counter : counter + 1;
          third = second;
          second = first;
          first = 0;
        }

        window.addEventListener('click', cng);
        window.addEventListener('keydown', cng);
        window.addEventListener('touchstart', cng);
      })();
    </script>
  </head>
  <body>
    <div class="container">
      <h1>V3可能まで残り</h1>
      <p class="v-three">0.0</p>
      <ul>
        <li><span class="label">1:&nbsp;</span><span class="time first">&nbsp;</span></li>
        <li><span class="label">2:&nbsp;</span><span class="time second">&nbsp;</span></li>
        <li><span class="label">3:&nbsp;</span><span class="time third">&nbsp;</span></li>
      </ul>
    </div>
  </body>
</html>
